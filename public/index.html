<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ricochet Robot Solver</title>
    <link rel="stylesheet" href="/index.css">
</head>
<body class="play">
    <div hidden>
        <img src="images/goals/star.png"/>
        <img src="images/goals/moon.png"/>
        <img src="images/goals/planet.png"/>
        <img src="images/goals/gear.png"/>
        <img src="images/goals/void.png"/>
        <img src="images/bot.png"/>
    </div>

    <canvas class="board" height="500" width="500"></canvas>
    <div class="goals">
        <img src="images/goals/star.png" goal-id="0" class="goal red"/>
        <img src="images/goals/star.png" goal-id="1" class="goal green"/>
        <img src="images/goals/star.png" goal-id="2" class="goal blue"/>
        <img src="images/goals/star.png" goal-id="3" class="goal yellow"/>
        
        <img src="images/goals/moon.png" goal-id="4" class="goal red"/>
        <img src="images/goals/moon.png" goal-id="5" class="goal green"/>
        <img src="images/goals/moon.png" goal-id="6" class="goal blue"/>
        <img src="images/goals/moon.png" goal-id="7" class="goal yellow"/>
        
        <img src="images/goals/gear.png" goal-id="8" class="goal red"/>
        <img src="images/goals/gear.png" goal-id="9" class="goal green"/>
        <img src="images/goals/gear.png" goal-id="10" class="goal blue"/>
        <img src="images/goals/gear.png" goal-id="11" class="goal yellow"/>
        
        <img src="images/goals/planet.png" goal-id="12" class="goal red"/>
        <img src="images/goals/planet.png" goal-id="13" class="goal green"/>
        <img src="images/goals/planet.png" goal-id="14" class="goal blue"/>
        <img src="images/goals/planet.png" goal-id="15" class="goal yellow"/>
        
        <img src="images/goals/void.png" goal-id="16" class="goal void"/>
    </div>
    <div class="robots">
        <img src="images/bot.png" robot-id="0" class="voidRobot"/>
        <img src="images/bot.png" robot-id="1" class="redRobot"/>
        <img src="images/bot.png" robot-id="2" class="greenRobot"/>
        <img src="images/bot.png" robot-id="3" class="blueRobot" />
        <img src="images/bot.png" robot-id="4" class="yellowRobot"/>
    </div>
    <div class="interface">
        <h2>Ricochet Robot - Solver</h2>
        <section class="setupPanel">
            <p>In this mode you can move goals around and click to create or delete walls</p>
            <button onclick="switchMode('play')">Save Board Setup</button>
        </section>
        <section class="playPanel">
            <button onclick="switchMode('setup')">Edit Board Setup</button>
            
            <p>Select a goal to solve for :</p>
            <div class="goalSelect">
                <img onclick="selectGoal(this, 0)" src="images/goals/star.png" class="starRed red"/>
                <img onclick="selectGoal(this, 1)" src="images/goals/star.png" class="starGreen green"/>
                <img onclick="selectGoal(this, 2)" src="images/goals/star.png" class="starBlue blue"/>
                <img onclick="selectGoal(this, 3)" src="images/goals/star.png" class="starYellow yellow"/>
                
                <img onclick="selectGoal(this, 4)" src="images/goals/moon.png" class="moonRed red"/>
                <img onclick="selectGoal(this, 5)" src="images/goals/moon.png" class="moonGreen green selected"/>
                <img onclick="selectGoal(this, 6)" src="images/goals/moon.png" class="moonBlue blue"/>
                <img onclick="selectGoal(this, 7)" src="images/goals/moon.png" class="moonYellow yellow"/>

                <img onclick="selectGoal(this, 8)" src="images/goals/gear.png" class="gearRed red"/>
                <img onclick="selectGoal(this, 9)" src="images/goals/gear.png" class="gearGreen green"/>
                <img onclick="selectGoal(this, 10)" src="images/goals/gear.png" class="gearBlue blue"/>
                <img onclick="selectGoal(this, 11)" src="images/goals/gear.png" class="gearYellow yellow"/>

                <img onclick="selectGoal(this, 12)" src="images/goals/planet.png" class="planetRed red"/>
                <img onclick="selectGoal(this, 13)" src="images/goals/planet.png" class="planetGreen green"/>
                <img onclick="selectGoal(this, 14)" src="images/goals/planet.png" class="planetBlue blue"/>
                <img onclick="selectGoal(this, 15)" src="images/goals/planet.png" class="planetYellow yellow"/>

                <img onclick="selectGoal(this, 16)" src="images/goals/void.png" class="void"/>
            </div>
            <button onclick="solveClick(this);">Solve</button>
        </section>
        <section class="solutionPanel">
            <p>Found a solution in <b class="moveCount">18</b> moves</p>
            <button onclick="playAnimation();">Play Animation</button>
            <button onclick="acceptSolution();">Accept</button>
            <button onclick="resetSolution();">Reset</button>
        </section>
    </div>
    <script src="index.js" type="module"></script>
    <script type="module">
      import init, { greet } from "./rust_pck/rust_solver.js";

      init().then(() => {
        greet("WebAssembly");
      });
    </script>
</body>
<footer>
    <script>
        document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] +
        ':35729/livereload.js?snipver=1"></' + 'script>')
    </script>
</footer>
</html>
